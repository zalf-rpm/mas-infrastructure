@namespace Mas.Infrastructure.BlazorComponents

@using MudBlazor
@using Mgmt = Rpc.Management

@code {
    Func<float?, string> valid = val => val < 0 || val > 1 ? "[0 - 1]" : null;
}
<MudCard Class=@(Params.OptCarbonConservation ? "" : "d-none")>
    <MudCardContent>
        <MudSelect @bind-Value=Params.CropUsage Label="CropUsage">
            <MudSelectItem Value=@Mgmt.Params.Harvest.CropUsage.biomassProduction>Biomass production</MudSelectItem>
            <MudSelectItem Value=@Mgmt.Params.Harvest.CropUsage.greenManure>Green manure</MudSelectItem>
        </MudSelect>
        <MudTextField @bind-Value=Params.CropImpactOnHumusBalance
                      Label="Crop contribution to humus"
                      Adornment="Adornment.End"
                      AdornmentText="?" />
        <MudTextField @bind-Value=Params.ResidueHeq
                      Label="ResidueHeq"
                      Adornment="Adornment.End"
                      AdornmentText="?" />
        <MudTextField @bind-Value=Params.OrganicFertilizerHeq
                      Label="OrganicFertilizerHeq"
                      Adornment="Adornment.End"
                      AdornmentText="?" />
        <MudTextField @bind-Value=Params.MaxResidueRecoverFraction
                      Label="MaxResidueRecoverFraction"
                      Adornment="Adornment.End"
                      AdornmentText="Fraction"
                      Validation=@valid />
    </MudCardContent>
</MudCard>

@code {
    [Parameter]
    public Mgmt.Params.Harvest.OptCarbonMgmtData Params { get; set; } = new();
}